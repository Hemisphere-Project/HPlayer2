#!/bin/bash

set -euo pipefail

# Resolve repository root
DIR="$(cd "$(dirname "$0")" && pwd)"

profile="${1:-default}"

cd "$DIR"

if command -v uv >/dev/null 2>&1; then
    exec uv run python "$DIR/launcher.py" "$profile"
fi

if [ -x "$DIR/.venv/bin/python" ]; then
    source "$DIR/.venv/bin/activate"
    exec python "$DIR/launcher.py" "$profile"
fi

echo "uv is required to run HPlayer2. You should first run scripts/install.sh'." >&2
exit 1
